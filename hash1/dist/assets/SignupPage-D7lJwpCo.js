import{j as e}from"./animations-BeX6PTQB.js";import{r as a,u as O,R as S,L as q}from"./router-CbkCOwDf.js";import{H as E,W as F,d as T,e as I,f as L,g as M,h as R,a as $,b as N}from"./Header-XW_uuWoa.js";import{G as A}from"./icons-DUf0FzR3.js";import"./vendor-DJG_os-6.js";import"./index-CGD0_5pj.js";function D(t){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M376 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96z"},child:[]},{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M288 304c-87 0-175.3 48-191.64 138.6-2 10.92 4.21 21.4 15.65 21.4H464c11.44 0 17.62-10.48 15.65-21.4C463.3 352 375 304 288 304z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M88 176v112m56-56H32"},child:[]}]})(t)}const i=S.memo(({icon:t,error:n,...o})=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:o.name,className:"block mb-2 text-sm font-medium text-neutral-200",children:[o.label,o.required&&e.jsx("span",{className:"ml-1 text-red-400",children:"*"}),o.optional&&e.jsx("span",{className:"ml-2 text-xs text-neutral-400",children:"(Optional)"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 z-10 flex items-center pl-4 pointer-events-none",children:e.jsx(t,{className:`w-5 h-5 transition-colors duration-200 ${n?"text-red-400":"text-neutral-400 group-focus-within:text-blue-400"}`})}),e.jsx("input",{...o,className:`w-full pl-12 pr-4 py-4 bg-white/5 border-2 border-white/10 rounded-2xl text-white placeholder-neutral-400 
            focus:outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-400/20 
            transition-all duration-200 
            hover:border-white/20 hover:bg-white/10
            ${n?"border-red-400 focus:border-red-400 focus:ring-red-400/20":""}`}),n&&e.jsx("div",{className:"absolute inset-0 border-2 opacity-50 pointer-events-none rounded-2xl border-red-400/50"})]}),n&&e.jsxs("p",{className:"flex items-center gap-2 mt-2 text-sm text-red-400",children:[e.jsx("div",{className:"w-4 h-4 text-red-400",children:"‚ö†Ô∏è"}),n]})]}));i.displayName="FormInput";const G=()=>{const[t,n]=a.useState({name:"",dept:"",branch:"",mobno:"",rollNumber:"",email:"",password:"",confirmPassword:""}),[o,w]=a.useState(""),[p,f]=a.useState(!1),[d,g]=a.useState({}),[x,l]=a.useState({type:"",text:""}),[u,b]=a.useState(!1),j=O(),c=a.useCallback(r=>{const{name:s,value:m}=r.target;n(h=>({...h,[s]:m})),g(h=>({...h,[s]:""})),l({type:"",text:""})},[]),y=a.useCallback(r=>{w(r.target.value),l({type:"",text:""})},[]),v=a.useCallback(()=>{let r={};return t.name.trim()||(r.name="Full Name is required."),t.dept.trim()||(r.dept="Department is required."),t.mobno.trim()?/^\d{10}$/.test(t.mobno)||(r.mobno="Mobile Number must be 10 digits."):r.mobno="Mobile Number is required.",t.rollNumber.trim()||(r.rollNumber="Roll Number is required."),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(r.email="Email address is invalid."):r.email="Email Address is required.",t.password?t.password.length<6&&(r.password="Password must be at least 6 characters long."):r.password="Password is required.",t.confirmPassword?t.confirmPassword!==t.password&&(r.confirmPassword="Passwords do not match."):r.confirmPassword="Confirm Password is required.",g(r),Object.keys(r).length===0},[t]),k=a.useCallback(async r=>{if(r.preventDefault(),l({type:"",text:""}),!!v()){b(!0);try{const s={username:t.name,dept:t.dept,branch:t.branch,mobno:t.mobno,rollNumber:t.rollNumber,email:t.email,password:t.password},m=await fetch("https://infotrek25.tech/api/auth/signup/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),h=await m.json();if(!m.ok)throw new Error(h.error||"Failed to request OTP. "+(h.message||""));l({type:"success",text:h.message||"OTP sent successfully!"}),f(!0)}catch(s){l({type:"error",text:s.message}),console.error("OTP Request Error:",s)}finally{b(!1)}}},[t,v]),P=a.useCallback(async r=>{if(r.preventDefault(),l({type:"",text:""}),!o.trim()||o.length!==6){l({type:"error",text:"Please enter a valid 6-digit OTP."});return}b(!0);try{const s=await fetch("https://infotrek25.tech/api/auth/signup/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,otp:o})}),m=await s.json();if(!s.ok)throw new Error(m.error||"OTP verification failed. "+(m.message||""));l({type:"success",text:m.message+" You can now log in."}),n({name:"",dept:"",branch:"",mobno:"",rollNumber:"",email:"",password:"",confirmPassword:""}),w(""),f(!1),setTimeout(()=>j("/login"),2e3)}catch(s){l({type:"error",text:s.message}),console.error("OTP Verification Error:",s)}finally{b(!1)}},[t.email,o,j]),C=a.useCallback(()=>{f(!1),l({type:"",text:""}),g({})},[]);return e.jsxs("div",{className:"relative min-h-screen text-white bg-background",children:[e.jsx(E,{}),e.jsxs("div",{className:"fixed inset-0 overflow-hidden opacity-50 pointer-events-none",children:[e.jsx("div",{className:"absolute rounded-full top-20 left-20 w-72 h-72 bg-blue-500/5 blur-3xl"}),e.jsx("div",{className:"absolute rounded-full bottom-20 right-20 w-96 h-96 bg-purple-500/5 blur-3xl"})]}),e.jsx(F,{className:"flex items-center justify-center min-h-screen px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 border bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-3xl border-white/10",children:e.jsx("div",{className:"flex items-center justify-center w-16 h-16 text-4xl",children:p?"üîê":"üöÄ"})})}),e.jsx("h1",{className:"mb-4 text-4xl font-black text-transparent md:text-5xl lg:text-6xl bg-gradient-to-r from-white via-blue-200 to-purple-200 bg-clip-text",children:p?"Verify Your Email":"Join INFOTREK'25"}),e.jsx("p",{className:"max-w-md mx-auto text-lg text-neutral-300",children:p?"Enter the 6-digit code sent to your email address":"Create your account to register for amazing events"})]}),e.jsxs("div",{className:"p-8 border shadow-2xl bg-gradient-to-br from-white/10 to-white/5 border-white/20 rounded-3xl md:p-10",children:[x.text&&e.jsx("div",{className:`mb-6 p-4 rounded-2xl border transition-all duration-200 ${x.type==="error"?"bg-red-500/10 border-red-500/30 text-red-300":"bg-green-500/10 border-green-500/30 text-green-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:x.type==="error"?"‚ùå":"‚úÖ"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:x.type==="error"?"Error":"Success"}),e.jsx("div",{className:"text-sm",children:x.text})]})]})}),p?e.jsxs("form",{onSubmit:P,className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("label",{htmlFor:"otp",className:"block mb-4 text-lg font-medium text-neutral-200",children:"Enter 6-Digit OTP"}),e.jsx("div",{className:"max-w-xs mx-auto",children:e.jsx("input",{type:"text",name:"otp",id:"otp",value:o,onChange:y,required:!0,maxLength:"6",className:"w-full px-6 py-4 font-mono text-2xl tracking-widest text-center text-white transition-all duration-200 border-2 bg-white/5 border-white/20 rounded-2xl placeholder-neutral-400 focus:outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-400/20",placeholder:"000000"})}),e.jsx("p",{className:"mt-3 text-sm text-neutral-400",children:"Check your email for the verification code"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:u,className:`w-full py-4 px-6 rounded-2xl font-bold text-white text-lg transition-all duration-200 ${u?"bg-neutral-600 text-neutral-400 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-500 shadow-lg shadow-green-500/25 hover:shadow-xl hover:shadow-green-500/30 hover:scale-[1.02]"}`,children:u?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 rounded-full border-white/30 border-t-white animate-spin"}),"Verifying..."]}):"Verify & Create Account üéâ"}),e.jsx("button",{type:"button",onClick:C,disabled:u,className:"w-full px-6 py-3 font-medium transition-all duration-200 border rounded-2xl text-neutral-300 border-white/20 hover:bg-white/5 hover:border-white/30",children:"‚Üê Back to Registration"})]})]}):e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(i,{icon:T,name:"name",type:"text",label:"Full Name",placeholder:"Your full name",value:t.name,onChange:c,required:!0,error:d.name}),e.jsx(i,{icon:I,name:"dept",type:"text",label:"Department",placeholder:"e.g., Computer Science",value:t.dept,onChange:c,required:!0,error:d.dept})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(i,{icon:L,name:"branch",type:"text",label:"Branch",placeholder:"e.g., AI, Software Engineering",value:t.branch,onChange:c,optional:!0,error:d.branch}),e.jsx(i,{icon:M,name:"mobno",type:"tel",label:"Mobile Number",placeholder:"10-digit mobile number",value:t.mobno,onChange:c,required:!0,error:d.mobno})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(i,{icon:R,name:"rollNumber",type:"text",label:"Roll Number",placeholder:"Your university roll number",value:t.rollNumber,onChange:c,required:!0,error:d.rollNumber}),e.jsx(i,{icon:$,name:"email",type:"email",label:"Email Address",placeholder:"you@example.com",value:t.email,onChange:c,required:!0,error:d.email})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(i,{icon:N,name:"password",type:"password",label:"Password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:t.password,onChange:c,required:!0,error:d.password}),e.jsx(i,{icon:N,name:"confirmPassword",type:"password",label:"Confirm Password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:t.confirmPassword,onChange:c,required:!0,error:d.confirmPassword})]}),e.jsx("button",{type:"submit",disabled:u,className:`w-full py-4 px-6 rounded-2xl font-bold text-white text-lg transition-all duration-200 ${u?"bg-neutral-600 text-neutral-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 hover:scale-[1.02]"}`,children:u?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 rounded-full border-white/30 border-t-white animate-spin"}),"Processing..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-3",children:["Get OTP",e.jsx(D,{className:"w-6 h-6"})]})})]}),e.jsxs("p",{className:"mt-8 text-center text-neutral-400",children:["Already have an account?"," ",e.jsx(q,{to:"/login",className:"font-semibold text-blue-400 transition-colors duration-200 hover:text-blue-300",children:"Sign In"})]})]})]})})]})};export{G as default};
