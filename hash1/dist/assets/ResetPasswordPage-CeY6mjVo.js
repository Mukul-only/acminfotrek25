import{j as e}from"./animations-BeX6PTQB.js";import{r as o,c as C,u as F,L as w,R}from"./router-CbkCOwDf.js";import{H as f,W as p,k as g,j,b as v}from"./Header-DKwDvOWl.js";import"./vendor-DJG_os-6.js";import"./icons-DUf0FzR3.js";import"./index-B3vYaEZk.js";const m=R.memo(({icon:s,error:n,...r})=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:r.name,className:"block mb-2 text-sm font-medium text-neutral-200",children:[r.label,e.jsx("span",{className:"ml-1 text-red-400",children:"*"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 z-10 flex items-center pl-4 pointer-events-none",children:e.jsx(s,{className:`w-5 h-5 transition-colors duration-200 ${n?"text-red-400":"text-neutral-400 group-focus-within:text-blue-400"}`})}),e.jsx("input",{...r,className:`w-full pl-12 pr-4 py-4 bg-white/5 border-2 border-white/10 rounded-2xl text-white placeholder-neutral-400 
            focus:outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-400/20 
            transition-all duration-200
            hover:border-white/20 hover:bg-white/10
            ${n?"border-red-400 focus:border-red-400 focus:ring-red-400/20":""}`}),n&&e.jsx("div",{className:"absolute inset-0 border-2 opacity-50 pointer-events-none rounded-2xl border-red-400/50"})]})]}));m.displayName="FormInput";const T=()=>{const[s,n]=o.useState({newPassword:"",confirmPassword:""}),[r,t]=o.useState(""),[N,P]=o.useState(!1),[i,u]=o.useState(!1),[y]=C(),x=F(),l=y.get("token");o.useEffect(()=>{l||t("Invalid or missing reset token. Please request a new password reset.")},[l]);const h=o.useCallback(d=>{const{name:a,value:c}=d.target;n(S=>({...S,[a]:c})),t("")},[]),b=()=>!s.newPassword||!s.confirmPassword?(t("Both password fields are required."),!1):s.newPassword.length<6?(t("Password must be at least 6 characters long."),!1):s.newPassword!==s.confirmPassword?(t("Passwords do not match."),!1):!0,k=o.useCallback(async d=>{if(d.preventDefault(),!!b()){u(!0),t("");try{const a=await fetch("http://localhost:3000/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l,newPassword:s.newPassword})}),c=await a.json();if(!a.ok)throw new Error(c.error||"Failed to reset password.");P(!0),setTimeout(()=>{x("/login")},3e3)}catch(a){t(a.message),console.error("Reset Password Error:",a)}finally{u(!1)}}},[s,l,x,b]);return N?e.jsxs("div",{className:"relative min-h-screen text-white bg-background",children:[e.jsx(f,{}),e.jsx(p,{className:"flex items-center justify-center min-h-screen px-4 py-12",children:e.jsx("div",{className:"w-full max-w-md text-center",children:e.jsxs("div",{className:"p-8 border shadow-2xl bg-gradient-to-br from-white/10 to-white/5 border-white/20 rounded-3xl",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 border bg-gradient-to-br from-green-500/20 to-blue-500/20 rounded-3xl border-white/10",children:e.jsx(g,{className:"w-16 h-16 text-green-400"})})}),e.jsx("h1",{className:"mb-4 text-3xl font-bold text-white",children:"Password Reset Successful!"}),e.jsx("p",{className:"mb-6 text-neutral-300",children:"Your password has been updated successfully. You will be redirected to the login page in a few seconds."}),e.jsxs(w,{to:"/login",className:"inline-flex items-center gap-2 px-6 py-3 font-semibold text-white transition-all duration-200 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-500 hover:scale-105",children:["Go to Login",e.jsx(j,{className:"w-4 h-4 rotate-180"})]})]})})})]}):e.jsxs("div",{className:"relative min-h-screen text-white bg-background",children:[e.jsx(f,{}),e.jsxs("div",{className:"fixed inset-0 overflow-hidden opacity-50 pointer-events-none",children:[e.jsx("div",{className:"absolute rounded-full top-20 left-20 w-72 h-72 bg-blue-500/5 blur-3xl"}),e.jsx("div",{className:"absolute rounded-full bottom-20 right-20 w-96 h-96 bg-purple-500/5 blur-3xl"})]}),e.jsx(p,{className:"flex items-center justify-center min-h-screen px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 border bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-3xl border-white/10",children:e.jsx("div",{className:"flex items-center justify-center w-16 h-16 text-4xl",children:"üîê"})})}),e.jsx("h1",{className:"mb-4 text-4xl font-black text-transparent md:text-5xl lg:text-6xl bg-gradient-to-r from-white via-blue-200 to-purple-200 bg-clip-text",children:"Reset Password"}),e.jsx("p",{className:"text-lg text-neutral-300",children:"Create a new password for your account"})]}),e.jsxs("div",{className:"p-8 border shadow-2xl bg-gradient-to-br from-white/10 to-white/5 border-white/20 rounded-3xl md:p-10",children:[r&&e.jsx("div",{className:"p-4 mb-6 text-red-300 transition-all duration-200 border rounded-2xl bg-red-500/10 border-red-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"‚ùå"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Error"}),e.jsx("div",{className:"text-sm",children:r})]})]})}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsx(m,{icon:v,name:"newPassword",type:"password",label:"New Password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:s.newPassword,onChange:h,required:!0,error:r&&!s.newPassword}),e.jsx(m,{icon:v,name:"confirmPassword",type:"password",label:"Confirm Password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",value:s.confirmPassword,onChange:h,required:!0,error:r&&!s.confirmPassword}),e.jsx("div",{className:"p-4 border rounded-2xl bg-blue-500/10 border-blue-500/30",children:e.jsx("p",{className:"text-sm text-blue-300",children:"Password must be at least 6 characters long"})}),e.jsx("button",{type:"submit",disabled:i||!l,className:`w-full py-4 px-6 rounded-2xl font-bold text-white text-lg transition-all duration-200 ${i||!l?"bg-neutral-600 text-neutral-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 hover:scale-[1.02]"}`,children:i?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 rounded-full border-white/30 border-t-white animate-spin"}),"Resetting Password..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-3",children:["Reset Password",e.jsx(g,{className:"w-6 h-6"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs(w,{to:"/login",className:"inline-flex items-center gap-2 font-semibold text-blue-400 transition-colors duration-200 hover:text-blue-300",children:[e.jsx(j,{className:"w-4 h-4"}),"Back to Login"]})})]})]})})]})};export{T as default};
